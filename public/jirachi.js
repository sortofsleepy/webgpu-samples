/*
 *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
*****************************************************************************/
'use strict';(function(){function oa(a,b,c,e){return new (c||(c=Promise))(function(k,f){function g(a){try{n(e.next(a))}catch(y){f(y)}}function d(a){try{n(e["throw"](a))}catch(y){f(y)}}function n(a){a.done?k(a.value):(new c(function(b){b(a.value)})).then(g,d)}n((e=e.apply(a,b||[])).next())})}function pa(a,b){function c(a){return function(b){return e([a,b])}}function e(c){if(f)throw new TypeError("Generator is already executing.");for(;k;)try{if(f=1,g&&(d=c[0]&2?g["return"]:c[0]?g["throw"]||((d=g["return"])&&
d.call(g),0):g.next)&&!(d=d.call(g,c[1])).done)return d;if(g=0,d)c=[c[0]&2,d.value];switch(c[0]){case 0:case 1:d=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++;g=c[1];c=[0];continue;case 7:c=k.ops.pop();k.trys.pop();continue;default:if(!(d=k.trys,d=0<d.length&&d[d.length-1])&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!d||c[1]>d[0]&&c[1]<d[3]))k.label=c[1];else if(6===c[0]&&k.label<d[1])k.label=d[1],d=c;else if(d&&k.label<d[2])k.label=d[2],k.ops.push(c);else{d[2]&&k.ops.pop();
k.trys.pop();continue}}c=b.call(a,k)}catch(y){c=[6,y],g=0}finally{f=d=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var k={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},f,g,d,n;return n={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n}function qa(){var a=window.navigator.userAgent;if(-1!==a.search("Chrome"))return"gpupresent";if(-1===a.search("Chrome")&&-1!==a.search("Safari"))return"gpu"}
function ra(a,b,c){return oa(this,void 0,void 0,function(){var e;return pa(this,function(k){e=new Image;e.src=b;return[2,(new Promise(function(a,b){e.onload=function(){a(e)}})).then(function(b){var e=document.createElement("canvas");e.width=b.width;e.height=b.height;e=e.getContext("2d");e.translate(0,b.height);e.scale(1,-1);e.drawImage(b,0,0,b.width,b.height);var k=e.getImageData(0,0,b.width,b.height);e=256*Math.ceil(4*b.width/256);if(e==4*b.width)var d=k.data;else{d=new Uint8Array(e*b.height);for(var f=
0,y=0;y<b.height;++y)for(var w=0;w<b.width;++w){var h=4*w+y*e;d[h]=k.data[f];d[h+1]=k.data[f+1];d[h+2]=k.data[f+2];d[h+3]=k.data[f+3];f+=4}}k=a.createTexture({size:{width:b.width,height:b.height,depth:1},format:"rgba8unorm",usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.SAMPLED});f=a.createBuffer({size:4*d.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC});f.setSubData(0,d);e=256*Math.ceil(4*b.width/256);d=a.createCommandEncoder({});d.copyBufferToTexture({buffer:f,rowPitch:e,imageHeight:b.height},
{texture:k},{width:b.width,height:b.height,depth:1});a.defaultQueue.submit([d.finish()]);c(k)})]})})}var ia=new Float32Array([1,-1,1,1,1,0,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,0,0,1,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,1,1,-1,-1,1,1,0,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,0,0,-1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,-1,1,1,1,0,1,0,0,-1,1,-1,1,0,1,0,1,1,0,-1,1,1,1,0,1,1,1,1,1,1,1,-1,1,1,1,
0,1,0,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,1,-1,1,0,1,0,1,0,0,-1,-1,-1,1,0,0,0,1,1,0,-1,-1,1,1,0,0,1,1,1,1,-1,1,-1,1,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,1,0,1,-1,-1,1,1,0,0,1,1,0,0,-1,-1,1,1,0,0,1,1,0,0,1,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,-1,-1,-1,1,0,0,0,1,0,1,-1,1,-1,1,0,1,0,1,0,0,1,1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,-1,1,-1,1,0,1,0,1,0,0]),P=function(){var a="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;
return function(b){function c(a){var b="i32";"*"===b.charAt(b.length-1)&&(b="i32");switch(b){case "i1":return Q[a>>0];case "i8":return Q[a>>0];case "i16":return ka[a>>1];case "i32":return C[a>>2];case "i64":return C[a>>2];case "float":return sa[a>>2];case "double":return ta[a>>3];default:t("invalid type for getValue: "+b)}return null}function e(){var a=q._convert_glsl_to_spirv;a||t("Assertion failed: Cannot call unknown function convert_glsl_to_spirv, make sure it is exported");return a}function k(a){var b=
["string","number","boolean","number","number"],c={string:function(a){var b=0;if(null!==a&&void 0!==a&&0!==a){var c=(a.length<<2)+1;b=Fa(c);l(a,I,b,c)}return b},array:function(a){var b=Fa(a.length);Q.set(a,b);return b}},k=e(),d=[],f=0;if(a)for(var g=0;g<a.length;g++){var ja=c[b[g]];ja?(0===f&&(f=Da()),d[g]=ja(a[g])):d[g]=a[g]}a=k.apply(null,d);0!==f&&Ea(f);return a}function d(a,b,c){var e=b+c;for(c=b;a[c]&&!(c>=e);)++c;if(16<c-b&&a.subarray&&Ha)return Ha.decode(a.subarray(b,c));for(e="";b<c;){var k=
a[b++];if(k&128){var d=a[b++]&63;if(192==(k&224))e+=String.fromCharCode((k&31)<<6|d);else{var f=a[b++]&63;k=224==(k&240)?(k&15)<<12|d<<6|f:(k&7)<<18|d<<12|f<<6|a[b++]&63;65536>k?e+=String.fromCharCode(k):(k-=65536,e+=String.fromCharCode(55296|k>>10,56320|k&1023))}}else e+=String.fromCharCode(k)}return e}function g(a){return a?d(I,a,void 0):""}function l(a,b,c,e){if(0<e){e=c+e-1;for(var k=0;k<a.length;++k){var d=a.charCodeAt(k);if(55296<=d&&57343>=d){var f=a.charCodeAt(++k);d=65536+((d&1023)<<10)|
f&1023}if(127>=d){if(c>=e)break;b[c++]=d}else{if(2047>=d){if(c+1>=e)break;b[c++]=192|d>>6}else{if(65535>=d){if(c+2>=e)break;b[c++]=224|d>>12}else{if(c+3>=e)break;b[c++]=240|d>>18;b[c++]=128|d>>12&63}b[c++]=128|d>>6&63}b[c++]=128|d&63}}b[c]=0}}function n(a){for(var b=0,c=0;c<a.length;++c){var e=a.charCodeAt(c);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|a.charCodeAt(++c)&1023);127>=e?++b:b=2047>=e?b+2:65535>=e?b+3:b+4}return b}function m(a){0<a%65536&&(a+=65536-a%65536);return a}function y(a){ca=a;
q.HEAP8=Q=new Int8Array(a);q.HEAP16=ka=new Int16Array(a);q.HEAP32=C=new Int32Array(a);q.HEAPU8=I=new Uint8Array(a);q.HEAPU16=ua=new Uint16Array(a);q.HEAPU32=U=new Uint32Array(a);q.HEAPF32=sa=new Float32Array(a);q.HEAPF64=ta=new Float64Array(a)}function w(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b();else{var c=b.T;"number"===typeof c?void 0===b.R?q.dynCall_v(c):q.dynCall_vi(c,b.R):c(void 0===b.R?null:b.R)}}}function h(){var a=q.preRun.shift();Ia.unshift(a)}function t(a){if(q.onAbort)q.onAbort(a);
Ja(a);W(a);Ka=!0;throw new WebAssembly.RuntimeError("abort("+a+"). Build with -s ASSERTIONS=1 for more info.");}function p(){var a=X;return String.prototype.startsWith?a.startsWith("data:application/octet-stream;base64,"):0===a.indexOf("data:application/octet-stream;base64,")}function v(){try{if(da)return new Uint8Array(da);if(va)return va(X);throw"both async and sync fetching of the wasm failed";}catch(ja){t(ja)}}function u(){return da||!wa&&!ea||"function"!==typeof fetch?new Promise(function(a){a(v())}):
fetch(X,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+X+"'";return a.arrayBuffer()}).catch(function(){return v()})}function r(){xa+=4;return C[xa-4>>2]}function z(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a);}}function x(a){for(var b="";I[a];)b+=La[I[a++]];return b}function B(a,b){if(void 0===a)a="_unknown";else{a=a.replace(/[^a-zA-Z0-9_]/g,"$");var c=a.charCodeAt(0);
a=48<=c&&57>=c?"_"+a:a}return(new Function("body","return function "+a+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n'))(b)}function A(a){var b=Error,c=B(a,function(b){this.name=a;this.message=b;b=Error(b).stack;void 0!==b&&(this.stack=this.toString()+"\n"+b.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(b.prototype);c.prototype.constructor=c;c.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message};return c}function G(a){throw new Ma(a);
}function F(a,b,c){c=c||{};if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var e=b.name;a||G('type "'+e+'" must have a positive integer typeid pointer');if(Na.hasOwnProperty(a)){if(c.U)return;G("Cannot register type '"+e+"' twice")}Na[a]=b;ya.hasOwnProperty(a)&&(b=ya[a],delete ya[a],b.forEach(function(a){a()}))}function O(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=za.length?za.pop():
R.length;R[b]={W:1,value:a};return b}}function K(a){return this.fromWireType(U[a>>2])}function L(a){if(null===a)return"null";var b=typeof a;return"object"===b||"array"===b||"function"===b?a.toString():""+a}function S(a,b){switch(b){case 2:return function(a){return this.fromWireType(sa[a>>2])};case 3:return function(a){return this.fromWireType(ta[a>>3])};default:throw new TypeError("Unknown float type: "+a);}}function T(a,b,c){switch(b){case 0:return c?function(a){return Q[a]}:function(a){return I[a]};
case 1:return c?function(a){return ka[a>>1]}:function(a){return ua[a>>1]};case 2:return c?function(a){return C[a>>2]}:function(a){return U[a>>2]};default:throw new TypeError("Unknown integer type: "+a);}}function E(){if(!Aa){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"===typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Oa},b;for(b in Pa)a[b]=Pa[b];var c=[];for(b in a)c.push(b+"="+a[b]);Aa=c}return Aa}
function la(a){return 0===a%4&&(0!==a%100||0===a%400)}function ba(a,b){for(var c=0,e=0;e<=b;c+=a[e++]);return c}function P(a,b){for(a=new Date(a.getTime());0<b;){var c=a.getMonth(),e=(la(a.getFullYear())?ma:na)[c];if(b>e-a.getDate())b-=e-a.getDate()+1,a.setDate(1),11>c?a.setMonth(c+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);break}}return a}function ia(a,b,c,e){function k(a,b,c){for(a="number"===typeof a?a.toString():a||"";a.length<b;)a=c[0]+a;return a}function d(a,
b){return k(a,b,"0")}function f(a,b){function c(a){return 0>a?-1:0<a?1:0}var e;0===(e=c(a.getFullYear()-b.getFullYear()))&&0===(e=c(a.getMonth()-b.getMonth()))&&(e=c(a.getDate()-b.getDate()));return e}function l(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-
1,11,30)}}function n(a){a=P(new Date(a.J+1900,0,1),a.P);var b=l(new Date(a.getFullYear()+1,0,4));return 0>=f(l(new Date(a.getFullYear(),0,4)),a)?0>=f(b,a)?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}var m=C[e+40>>2];e={Z:C[e>>2],Y:C[e+4>>2],N:C[e+8>>2],M:C[e+12>>2],K:C[e+16>>2],J:C[e+20>>2],O:C[e+24>>2],P:C[e+28>>2],ia:C[e+32>>2],X:C[e+36>>2],$:m?g(m):""};c=g(c);m={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y",
"%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var q in m)c=c.replace(new RegExp(q,"g"),m[q]);var y="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),w="January February March April May June July August September October November December".split(" ");m={"%a":function(a){return y[a.O].substring(0,
3)},"%A":function(a){return y[a.O]},"%b":function(a){return w[a.K].substring(0,3)},"%B":function(a){return w[a.K]},"%C":function(a){return d((a.J+1900)/100|0,2)},"%d":function(a){return d(a.M,2)},"%e":function(a){return k(a.M,2," ")},"%g":function(a){return n(a).toString().substring(2)},"%G":function(a){return n(a)},"%H":function(a){return d(a.N,2)},"%I":function(a){a=a.N;0==a?a=12:12<a&&(a-=12);return d(a,2)},"%j":function(a){return d(a.M+ba(la(a.J+1900)?ma:na,a.K-1),3)},"%m":function(a){return d(a.K+
1,2)},"%M":function(a){return d(a.Y,2)},"%n":function(){return"\n"},"%p":function(a){return 0<=a.N&&12>a.N?"AM":"PM"},"%S":function(a){return d(a.Z,2)},"%t":function(){return"\t"},"%u":function(a){return a.O||7},"%U":function(a){var b=new Date(a.J+1900,0,1),c=0===b.getDay()?b:P(b,7-b.getDay());a=new Date(a.J+1900,a.K,a.M);return 0>f(c,a)?d(Math.ceil((31-c.getDate()+(ba(la(a.getFullYear())?ma:na,a.getMonth()-1)-31)+a.getDate())/7),2):0===f(c,b)?"01":"00"},"%V":function(a){var b=l(new Date(a.J+1900,
0,4)),c=l(new Date(a.J+1901,0,4)),e=P(new Date(a.J+1900,0,1),a.P);return 0>f(e,b)?"53":0>=f(c,e)?"01":d(Math.ceil((b.getFullYear()<a.J+1900?a.P+32-b.getDate():a.P+1-b.getDate())/7),2)},"%w":function(a){return a.O},"%W":function(a){var b=new Date(a.J,0,1),c=1===b.getDay()?b:P(b,0===b.getDay()?1:7-b.getDay()+1);a=new Date(a.J+1900,a.K,a.M);return 0>f(c,a)?d(Math.ceil((31-c.getDate()+(ba(la(a.getFullYear())?ma:na,a.getMonth()-1)-31)+a.getDate())/7),2):0===f(c,b)?"01":"00"},"%y":function(a){return(a.J+
1900).toString().substring(2)},"%Y":function(a){return a.J+1900},"%z":function(a){a=a.X;var b=0<=a;a=Math.abs(a)/60;return(b?"+":"-")+String("0000"+(a/60*100+a%60)).slice(-4)},"%Z":function(a){return a.$},"%%":function(){return"%"}};for(q in m)0<=c.indexOf(q)&&(c=c.replace(new RegExp(q,"g"),m[q](e)));q=oa(c);if(q.length>b)return 0;Q.set(q,a);return q.length-1}function oa(a){var b=Array(n(a)+1);l(a,b,0,b.length);return b}function Ba(){function a(){if(!fa&&(fa=!0,!Ka)){w(Ra);w(pa);if(q.onRuntimeInitialized)q.onRuntimeInitialized();
if(q.postRun)for("function"==typeof q.postRun&&(q.postRun=[q.postRun]);q.postRun.length;){var a=q.postRun.shift();Sa.unshift(a)}w(Sa)}}if(!(0<Y)){if(q.preRun)for("function"==typeof q.preRun&&(q.preRun=[q.preRun]);q.preRun.length;)h();w(Ia);0<Y||(q.setStatus?(q.setStatus("Running..."),setTimeout(function(){setTimeout(function(){q.setStatus("")},1);a()},1)):a())}}b=b||{};var q;q||(q="undefined"!==typeof b?b:{});q.compileGLSLZeroCopy=function(a,b,e){e=!!e;if("vertex"===b)var d=0;else if("fragment"===
b)d=4;else if("compute"===b)d=5;else throw Error("shader_stage must be 'vertex', 'fragment', or 'compute'");b=q._malloc(4);var f=q._malloc(4),g=k([a,d,e,b,f]);e=c(b);a=c(f);q._free(b);q._free(f);if(0===g)throw Error("GLSL compilation failed");b={};f=e/4;b.data=q.HEAPU32.subarray(f,f+a);b.free=function(){q._destroy_output_buffer(g)};return b};q.compileGLSL=function(a,b,c){a=q.compileGLSLZeroCopy(a,b,c);b=a.data.slice();a.free();return b};var Z={};for(H in q)q.hasOwnProperty(H)&&(Z[H]=q[H]);var Oa=
"./this.program",wa=!1,ea=!1;wa="object"===typeof window;ea="function"===typeof importScripts;var M="",va;if(wa||ea)ea?M=self.location.href:document.currentScript&&(M=document.currentScript.src),a&&(M=a),0!==M.indexOf("blob:")?M=M.substr(0,M.lastIndexOf("/")+1):M="",ea&&(va=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)});var Ja=q.print||console.log.bind(console),W=q.printErr||console.warn.bind(console);for(H in Z)Z.hasOwnProperty(H)&&
(q[H]=Z[H]);Z=null;q.thisProgram&&(Oa=q.thisProgram);var da;q.wasmBinary&&(da=q.wasmBinary);"object"!==typeof WebAssembly&&W("no native wasm support detected");var aa;Z=new WebAssembly.Table({initial:861,maximum:861,element:"anyfunc"});var Ka=!1,Ha="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var ca,Q,I,ka,ua,C,U,sa,ta;var H=q.TOTAL_MEMORY||16777216;q.wasmMemory?aa=q.wasmMemory:aa=new WebAssembly.Memory({initial:H/65536});
aa&&(ca=aa.buffer);H=ca.byteLength;y(ca);C[79464]=5560896;var Ia=[],Ra=[],pa=[],Sa=[],Y=0,ha=null;q.preloadedImages={};q.preloadedAudios={};var X="glslang.wasm";p()||(H=X,X=q.locateFile?q.locateFile(H,M):M+H);Ra.push({T:function(){ra()}});var qa=[null,[],[]],xa=0,Ca={},La=void 0,ya={},Na={},Ma=void 0,za=[],R=[{},{value:void 0},{value:null},{value:!0},{value:!1}],Pa={},Aa,ma=[31,29,31,30,31,30,31,31,30,31,30,31],na=[31,28,31,30,31,30,31,31,30,31,30,31];M=Array(256);for(H=0;256>H;++H)M[H]=String.fromCharCode(H);
La=M;Ma=q.BindingError=A("BindingError");q.InternalError=A("InternalError");q.count_emval_handles=function(){for(var a=0,b=5;b<R.length;++b)void 0!==R[b]&&++a;return a};q.get_first_emval=function(){for(var a=5;a<R.length;++a)if(void 0!==R[a])return R[a];return null};var Ua={j:function(){},g:function(){q.___errno_location&&(C[q.___errno_location()>>2]=63);return-1},v:function(a,b){xa=b;try{var c=r(),e=r();if(-1===c||0===e)var d=-28;else{var k=Ca.V[c];if(k&&e===k.fa){var f=(void 0).da(k.ca);Ca.ba(c,
f,e,k.flags);(void 0).ha(f);Ca.V[c]=null;k.aa&&V(k.ga)}d=0}return d}catch(Ga){return t(Ga),-Ga.S}},d:function(){},s:function(a,b,c,e,k){var d=z(c);b=x(b);F(a,{name:b,fromWireType:function(a){return!!a},toWireType:function(a,b){return b?e:k},argPackAdvance:8,readValueFromPointer:function(a){if(1===c)var e=Q;else if(2===c)e=ka;else if(4===c)e=C;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(e[a>>d])},L:null})},q:function(a,b){b=x(b);F(a,{name:b,fromWireType:function(a){var b=
R[a].value;4<a&&0===--R[a].W&&(R[a]=void 0,za.push(a));return b},toWireType:function(a,b){return O(b)},argPackAdvance:8,readValueFromPointer:K,L:null})},e:function(a,b,c){c=z(c);b=x(b);F(a,{name:b,fromWireType:function(a){return a},toWireType:function(a,b){if("number"!==typeof b&&"boolean"!==typeof b)throw new TypeError('Cannot convert "'+L(b)+'" to '+this.name);return b},argPackAdvance:8,readValueFromPointer:S(b,c),L:null})},b:function(a,b,c,e,k){function d(a){return a}b=x(b);-1===k&&(k=4294967295);
var f=z(c);if(0===e){var g=32-8*c;d=function(a){return a<<g>>>g}}var l=-1!=b.indexOf("unsigned");F(a,{name:b,fromWireType:d,toWireType:function(a,c){if("number"!==typeof c&&"boolean"!==typeof c)throw new TypeError('Cannot convert "'+L(c)+'" to '+this.name);if(c<e||c>k)throw new TypeError('Passing a number "'+L(c)+'" from JS side to C/C++ side to an argument of type "'+b+'", which is outside the valid range ['+e+", "+k+"]!");return l?c>>>0:c|0},argPackAdvance:8,readValueFromPointer:T(b,f,0!==e),L:null})},
a:function(a,b,c){function e(a){a>>=2;var b=U;return new k(b.buffer,b[a+1],b[a])}var k=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];c=x(c);F(a,{name:c,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{U:!0})},f:function(a,b){b=x(b);var c="std::string"===b;F(a,{name:b,fromWireType:function(a){var b=U[a>>2];if(c){var e=I[a+4+b],k=0;0!=e&&(k=e,I[a+4+b]=0);var d=a+4;for(e=0;e<=b;++e){var f=a+4+e;if(0==I[f]){d=g(d);if(void 0===l)var l=d;else l+=
String.fromCharCode(0),l+=d;d=f+1}}0!=k&&(I[a+4+b]=k)}else{l=Array(b);for(e=0;e<b;++e)l[e]=String.fromCharCode(I[a+4+e]);l=l.join("")}V(a);return l},toWireType:function(a,b){b instanceof ArrayBuffer&&(b=new Uint8Array(b));var e="string"===typeof b;e||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int8Array||G("Cannot pass non-string to std::string");var k=(c&&e?function(){return n(b)}:function(){return b.length})(),d=Ta(4+k+1);U[d>>2]=k;if(c&&e)l(b,I,d+4,k+1);else if(e)for(e=
0;e<k;++e){var f=b.charCodeAt(e);255<f&&(V(d),G("String has UTF-16 code units that do not fit in 8 bits"));I[d+4+e]=f}else for(e=0;e<k;++e)I[d+4+e]=b[e];null!==a&&a.push(V,d);return d},argPackAdvance:8,readValueFromPointer:K,L:function(a){V(a)}})},r:function(a,b,c){c=x(c);if(2===b)var e=function(){return ua},k=1;else 4===b&&(e=function(){return U},k=2);F(a,{name:c,fromWireType:function(a){for(var b=e(),c=U[a>>2],d=Array(c),f=a+4>>k,g=0;g<c;++g)d[g]=String.fromCharCode(b[f+g]);V(a);return d.join("")},
toWireType:function(a,c){var d=c.length,f=Ta(4+d*b),g=e();U[f>>2]=d;for(var l=f+4>>k,n=0;n<d;++n)g[l+n]=c.charCodeAt(n);null!==a&&a.push(V,f);return f},argPackAdvance:8,readValueFromPointer:K,L:function(a){V(a)}})},t:function(a,b){b=x(b);F(a,{ea:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},c:function(){t()},n:function(a,b,c){I.set(I.subarray(b,b+c),a)},o:function(a){if(2147418112<a)return!1;for(var b=Math.max(Q.length,16777216);b<a;)536870912>=b?b=m(2*b):b=Math.min(m((3*
b+2147483648)/4),2147418112);a:{try{aa.grow(b-ca.byteLength+65535>>16);y(aa.buffer);a=1;break a}catch(Xa){}a=void 0}return a?!0:!1},h:function(a,b){var c=0;E().forEach(function(e,d){var k=b+c;d=C[a+4*d>>2]=k;for(k=0;k<e.length;++k)Q[d++>>0]=e.charCodeAt(k);Q[d>>0]=0;c+=e.length+1});return 0},i:function(a,b){var c=E();C[a>>2]=c.length;var e=0;c.forEach(function(a){e+=a.length+1});C[b>>2]=e;return 0},l:function(){return 0},m:function(){return 0},k:function(a,b,c,e){try{for(var k=0,f=0;f<c;f++){for(var g=
C[b+8*f>>2],l=C[b+(8*f+4)>>2],n=0;n<l;n++){var m=I[g+n],q=qa[a];0===m||10===m?((1===a?Ja:W)(d(q,0)),q.length=0):q.push(m)}k+=l}C[e>>2]=k;return 0}catch(Qa){return t(Qa),Qa.S}},memory:aa,w:function(){},p:function(){},u:function(a,b,c,e){return ia(a,b,c,e)},table:Z};M=function(){function a(a){q.asm=a.exports;Y--;q.monitorRunDependencies&&q.monitorRunDependencies(Y);0==Y&&ha&&(a=ha,ha=null,a())}function b(b){a(b.instance)}function c(a){return u().then(function(a){return WebAssembly.instantiate(a,e)}).then(a,
function(a){W("failed to asynchronously prepare wasm: "+a);t(a)})}var e={env:Ua,wasi_unstable:Ua};Y++;q.monitorRunDependencies&&q.monitorRunDependencies(Y);if(q.instantiateWasm)try{return q.instantiateWasm(e,a)}catch(Wa){return W("Module.instantiateWasm callback failed with error: "+Wa),!1}(function(){if(da||"function"!==typeof WebAssembly.instantiateStreaming||p()||"function"!==typeof fetch)return c(b);fetch(X,{credentials:"same-origin"}).then(function(a){return WebAssembly.instantiateStreaming(a,
e).then(b,function(a){W("wasm streaming compile failed: "+a);W("falling back to ArrayBuffer instantiation");c(b)})})})();return{}}();q.asm=M;var ra=q.___wasm_call_ctors=function(){return q.asm.x.apply(null,arguments)};q._convert_glsl_to_spirv=function(){return q.asm.y.apply(null,arguments)};q._destroy_output_buffer=function(){return q.asm.z.apply(null,arguments)};var Ta=q._malloc=function(){return q.asm.A.apply(null,arguments)},V=q._free=function(){return q.asm.B.apply(null,arguments)};q.___getTypeName=
function(){return q.asm.C.apply(null,arguments)};q.___embind_register_native_and_builtin_types=function(){return q.asm.D.apply(null,arguments)};var Da=q.stackSave=function(){return q.asm.E.apply(null,arguments)},Fa=q.stackAlloc=function(){return q.asm.F.apply(null,arguments)},Ea=q.stackRestore=function(){return q.asm.G.apply(null,arguments)};q.dynCall_vi=function(){return q.asm.H.apply(null,arguments)};q.dynCall_v=function(){return q.asm.I.apply(null,arguments)};q.asm=M;var fa;q.then=function(a){if(fa)a(q);
else{var b=q.onRuntimeInitialized;q.onRuntimeInitialized=function(){b&&b();a(q)}}return q};ha=function Va(){fa||Ba();fa||(ha=Va)};q.run=Ba;if(q.preInit)for("function"==typeof q.preInit&&(q.preInit=[q.preInit]);0<q.preInit.length;)q.preInit.pop()();Ba();return b}}();"object"===typeof exports&&"object"===typeof module?module.exports=P:"function"===typeof define&&define.amd?define([],function(){return P}):"object"===typeof exports&&(exports.Module=P);var Da=(()=>{let a=()=>new Promise((a)=>{P({locateFile(){const a=
(document.currentScript&&document.currentScript.src||(new URL("jirachi.js",document.baseURI)).href).lastIndexOf("/");return(document.currentScript&&document.currentScript.src||(new URL("jirachi.js",document.baseURI)).href).substring(0,a)+"/glslang.wasm"},onRuntimeInitialized(){a({compileGLSLZeroCopy:this.compileGLSLZeroCopy,compileGLSL:this.compileGLSL})}})}),b;return()=>{b||(b=a());return b}})(),r={EPSILON:1E-6};r.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;r.RANDOM=Math.random;
r.ENABLE_SIMD=!1;r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in window;r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE;r.setMatrixArrayType=function(a){r.ARRAY_TYPE=a};var Ea=Math.PI/180;r.toRadian=function(a){return a*Ea};r.equals=function(a,b){return Math.abs(a-b)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};var d=void 0!==window.SIMD?window.SIMD:{},h={scalar:{},SIMD:{},create:function(){var a=new r.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=
1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new r.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,
b,c,e,k,d,g,l,n,m,y,w,h,t,p,v){var f=new r.ARRAY_TYPE(16);f[0]=a;f[1]=b;f[2]=c;f[3]=e;f[4]=k;f[5]=d;f[6]=g;f[7]=l;f[8]=n;f[9]=m;f[10]=y;f[11]=w;f[12]=h;f[13]=t;f[14]=p;f[15]=v;return f},set:function(a,b,c,e,d,f,g,l,n,m,y,w,h,t,p,r,u){a[0]=b;a[1]=c;a[2]=e;a[3]=d;a[4]=f;a[5]=g;a[6]=l;a[7]=n;a[8]=m;a[9]=y;a[10]=w;a[11]=h;a[12]=t;a[13]=p;a[14]=r;a[15]=u;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;
return a}};h.scalar.transpose=function(a,b){if(a===b){var c=b[1],e=b[2],d=b[3],f=b[6],g=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=f;a[11]=b[14];a[12]=d;a[13]=g;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};h.SIMD.transpose=function(a,b){var c=window.SIMD;var e=c.Float32x4.load(b,0);var d=c.Float32x4.load(b,4);
var f=c.Float32x4.load(b,8);b=c.Float32x4.load(b,12);var g=c.Float32x4.shuffle(e,d,0,1,4,5);var l=c.Float32x4.shuffle(f,b,0,1,4,5);var n=c.Float32x4.shuffle(g,l,0,2,4,6);g=c.Float32x4.shuffle(g,l,1,3,5,7);c.Float32x4.store(a,0,n);c.Float32x4.store(a,4,g);g=c.Float32x4.shuffle(e,d,2,3,6,7);l=c.Float32x4.shuffle(f,b,2,3,6,7);e=c.Float32x4.shuffle(g,l,0,2,4,6);d=c.Float32x4.shuffle(g,l,1,3,5,7);c.Float32x4.store(a,8,e);c.Float32x4.store(a,12,d);return a};h.transpose=r.USE_SIMD?h.SIMD.transpose:h.scalar.transpose;
h.scalar.invert=function(a,b){var c=b[0],e=b[1],d=b[2],f=b[3],g=b[4],l=b[5],n=b[6],m=b[7],y=b[8],w=b[9],h=b[10],t=b[11],p=b[12],r=b[13],u=b[14];b=b[15];var J=c*l-e*g,z=c*n-d*g,x=c*m-f*g,B=e*n-d*l,A=e*m-f*l,G=d*m-f*n,F=y*r-w*p,O=y*u-h*p,K=y*b-t*p,L=w*u-h*r,S=w*b-t*r,T=h*b-t*u,E=J*T-z*S+x*L+B*K-A*O+G*F;if(!E)return null;E=1/E;a[0]=(l*T-n*S+m*L)*E;a[1]=(d*S-e*T-f*L)*E;a[2]=(r*G-u*A+b*B)*E;a[3]=(h*A-w*G-t*B)*E;a[4]=(n*K-g*T-m*O)*E;a[5]=(c*T-d*K+f*O)*E;a[6]=(u*x-p*G-b*z)*E;a[7]=(y*G-h*x+t*z)*E;a[8]=(g*
S-l*K+m*F)*E;a[9]=(e*K-c*S-f*F)*E;a[10]=(p*A-r*x+b*J)*E;a[11]=(w*x-y*A-t*J)*E;a[12]=(l*O-g*L-n*F)*E;a[13]=(c*L-e*O+d*F)*E;a[14]=(r*z-p*B-u*J)*E;a[15]=(y*B-w*z+h*J)*E;return a};h.SIMD.invert=function(a,b){var c=d.Float32x4.load(b,0);var e=d.Float32x4.load(b,4);var k=d.Float32x4.load(b,8);var f=d.Float32x4.load(b,12);b=d.Float32x4.shuffle(c,e,0,1,4,5);var g=d.Float32x4.shuffle(k,f,0,1,4,5);var l=d.Float32x4.shuffle(b,g,0,2,4,6);g=d.Float32x4.shuffle(g,b,1,3,5,7);b=d.Float32x4.shuffle(c,e,2,3,6,7);var n=
d.Float32x4.shuffle(k,f,2,3,6,7);var m=d.Float32x4.shuffle(b,n,0,2,4,6);n=d.Float32x4.shuffle(n,b,1,3,5,7);b=d.Float32x4.mul(m,n);b=d.Float32x4.swizzle(b,1,0,3,2);c=d.Float32x4.mul(g,b);e=d.Float32x4.mul(l,b);b=d.Float32x4.swizzle(b,2,3,0,1);c=d.Float32x4.sub(d.Float32x4.mul(g,b),c);e=d.Float32x4.sub(d.Float32x4.mul(l,b),e);e=d.Float32x4.swizzle(e,2,3,0,1);b=d.Float32x4.mul(g,m);b=d.Float32x4.swizzle(b,1,0,3,2);c=d.Float32x4.add(d.Float32x4.mul(n,b),c);f=d.Float32x4.mul(l,b);b=d.Float32x4.swizzle(b,
2,3,0,1);c=d.Float32x4.sub(c,d.Float32x4.mul(n,b));f=d.Float32x4.sub(d.Float32x4.mul(l,b),f);f=d.Float32x4.swizzle(f,2,3,0,1);b=d.Float32x4.mul(d.Float32x4.swizzle(g,2,3,0,1),n);b=d.Float32x4.swizzle(b,1,0,3,2);m=d.Float32x4.swizzle(m,2,3,0,1);c=d.Float32x4.add(d.Float32x4.mul(m,b),c);k=d.Float32x4.mul(l,b);b=d.Float32x4.swizzle(b,2,3,0,1);c=d.Float32x4.sub(c,d.Float32x4.mul(m,b));k=d.Float32x4.sub(d.Float32x4.mul(l,b),k);k=d.Float32x4.swizzle(k,2,3,0,1);b=d.Float32x4.mul(l,g);b=d.Float32x4.swizzle(b,
1,0,3,2);k=d.Float32x4.add(d.Float32x4.mul(n,b),k);f=d.Float32x4.sub(d.Float32x4.mul(m,b),f);b=d.Float32x4.swizzle(b,2,3,0,1);k=d.Float32x4.sub(d.Float32x4.mul(n,b),k);f=d.Float32x4.sub(f,d.Float32x4.mul(m,b));b=d.Float32x4.mul(l,n);b=d.Float32x4.swizzle(b,1,0,3,2);e=d.Float32x4.sub(e,d.Float32x4.mul(m,b));k=d.Float32x4.add(d.Float32x4.mul(g,b),k);b=d.Float32x4.swizzle(b,2,3,0,1);e=d.Float32x4.add(d.Float32x4.mul(m,b),e);k=d.Float32x4.sub(k,d.Float32x4.mul(g,b));b=d.Float32x4.mul(l,m);b=d.Float32x4.swizzle(b,
1,0,3,2);e=d.Float32x4.add(d.Float32x4.mul(n,b),e);f=d.Float32x4.sub(f,d.Float32x4.mul(g,b));b=d.Float32x4.swizzle(b,2,3,0,1);e=d.Float32x4.sub(e,d.Float32x4.mul(n,b));f=d.Float32x4.add(d.Float32x4.mul(g,b),f);l=d.Float32x4.mul(l,c);l=d.Float32x4.add(d.Float32x4.swizzle(l,2,3,0,1),l);l=d.Float32x4.add(d.Float32x4.swizzle(l,1,0,3,2),l);b=d.Float32x4.reciprocalApproximation(l);l=d.Float32x4.sub(d.Float32x4.add(b,b),d.Float32x4.mul(l,d.Float32x4.mul(b,b)));l=d.Float32x4.swizzle(l,0,0,0,0);if(!l)return null;
d.Float32x4.store(a,0,d.Float32x4.mul(l,c));d.Float32x4.store(a,4,d.Float32x4.mul(l,e));d.Float32x4.store(a,8,d.Float32x4.mul(l,k));d.Float32x4.store(a,12,d.Float32x4.mul(l,f));return a};h.invert=r.USE_SIMD?h.SIMD.invert:h.scalar.invert;h.scalar.adjoint=function(a,b){var c=b[0],e=b[1],d=b[2],f=b[3],g=b[4],l=b[5],n=b[6],m=b[7],y=b[8],h=b[9],p=b[10],t=b[11],r=b[12],v=b[13],u=b[14];b=b[15];a[0]=l*(p*b-t*u)-h*(n*b-m*u)+v*(n*t-m*p);a[1]=-(e*(p*b-t*u)-h*(d*b-f*u)+v*(d*t-f*p));a[2]=e*(n*b-m*u)-l*(d*b-f*
u)+v*(d*m-f*n);a[3]=-(e*(n*t-m*p)-l*(d*t-f*p)+h*(d*m-f*n));a[4]=-(g*(p*b-t*u)-y*(n*b-m*u)+r*(n*t-m*p));a[5]=c*(p*b-t*u)-y*(d*b-f*u)+r*(d*t-f*p);a[6]=-(c*(n*b-m*u)-g*(d*b-f*u)+r*(d*m-f*n));a[7]=c*(n*t-m*p)-g*(d*t-f*p)+y*(d*m-f*n);a[8]=g*(h*b-t*v)-y*(l*b-m*v)+r*(l*t-m*h);a[9]=-(c*(h*b-t*v)-y*(e*b-f*v)+r*(e*t-f*h));a[10]=c*(l*b-m*v)-g*(e*b-f*v)+r*(e*m-f*l);a[11]=-(c*(l*t-m*h)-g*(e*t-f*h)+y*(e*m-f*l));a[12]=-(g*(h*u-p*v)-y*(l*u-n*v)+r*(l*p-n*h));a[13]=c*(h*u-p*v)-y*(e*u-d*v)+r*(e*p-d*h);a[14]=-(c*(l*
u-n*v)-g*(e*u-d*v)+r*(e*n-d*l));a[15]=c*(l*p-n*h)-g*(e*p-d*h)+y*(e*n-d*l);return a};h.SIMD.adjoint=function(a,b){var c=d.Float32x4.load(b,0);var e=d.Float32x4.load(b,4);var k=d.Float32x4.load(b,8);var f=d.Float32x4.load(b,12);var g=d.Float32x4.shuffle(c,e,0,1,4,5);var l=d.Float32x4.shuffle(k,f,0,1,4,5);b=d.Float32x4.shuffle(g,l,0,2,4,6);l=d.Float32x4.shuffle(l,g,1,3,5,7);g=d.Float32x4.shuffle(c,e,2,3,6,7);e=d.Float32x4.shuffle(k,f,2,3,6,7);c=d.Float32x4.shuffle(g,e,0,2,4,6);e=d.Float32x4.shuffle(e,
g,1,3,5,7);g=d.Float32x4.mul(c,e);g=d.Float32x4.swizzle(g,1,0,3,2);k=d.Float32x4.mul(l,g);f=d.Float32x4.mul(b,g);g=d.Float32x4.swizzle(g,2,3,0,1);k=d.Float32x4.sub(d.Float32x4.mul(l,g),k);f=d.Float32x4.sub(d.Float32x4.mul(b,g),f);f=d.Float32x4.swizzle(f,2,3,0,1);g=d.Float32x4.mul(l,c);g=d.Float32x4.swizzle(g,1,0,3,2);k=d.Float32x4.add(d.Float32x4.mul(e,g),k);var n=d.Float32x4.mul(b,g);g=d.Float32x4.swizzle(g,2,3,0,1);k=d.Float32x4.sub(k,d.Float32x4.mul(e,g));n=d.Float32x4.sub(d.Float32x4.mul(b,g),
n);n=d.Float32x4.swizzle(n,2,3,0,1);g=d.Float32x4.mul(d.Float32x4.swizzle(l,2,3,0,1),e);g=d.Float32x4.swizzle(g,1,0,3,2);c=d.Float32x4.swizzle(c,2,3,0,1);k=d.Float32x4.add(d.Float32x4.mul(c,g),k);var m=d.Float32x4.mul(b,g);g=d.Float32x4.swizzle(g,2,3,0,1);k=d.Float32x4.sub(k,d.Float32x4.mul(c,g));m=d.Float32x4.sub(d.Float32x4.mul(b,g),m);m=d.Float32x4.swizzle(m,2,3,0,1);g=d.Float32x4.mul(b,l);g=d.Float32x4.swizzle(g,1,0,3,2);m=d.Float32x4.add(d.Float32x4.mul(e,g),m);n=d.Float32x4.sub(d.Float32x4.mul(c,
g),n);g=d.Float32x4.swizzle(g,2,3,0,1);m=d.Float32x4.sub(d.Float32x4.mul(e,g),m);n=d.Float32x4.sub(n,d.Float32x4.mul(c,g));g=d.Float32x4.mul(b,e);g=d.Float32x4.swizzle(g,1,0,3,2);f=d.Float32x4.sub(f,d.Float32x4.mul(c,g));m=d.Float32x4.add(d.Float32x4.mul(l,g),m);g=d.Float32x4.swizzle(g,2,3,0,1);f=d.Float32x4.add(d.Float32x4.mul(c,g),f);m=d.Float32x4.sub(m,d.Float32x4.mul(l,g));g=d.Float32x4.mul(b,c);g=d.Float32x4.swizzle(g,1,0,3,2);f=d.Float32x4.add(d.Float32x4.mul(e,g),f);n=d.Float32x4.sub(n,d.Float32x4.mul(l,
g));g=d.Float32x4.swizzle(g,2,3,0,1);f=d.Float32x4.sub(f,d.Float32x4.mul(e,g));n=d.Float32x4.add(d.Float32x4.mul(l,g),n);d.Float32x4.store(a,0,k);d.Float32x4.store(a,4,f);d.Float32x4.store(a,8,m);d.Float32x4.store(a,12,n);return a};h.adjoint=r.USE_SIMD?h.SIMD.adjoint:h.scalar.adjoint;h.determinant=function(a){var b=a[0],c=a[1],e=a[2],d=a[3],f=a[4],g=a[5],l=a[6],n=a[7],m=a[8],h=a[9],p=a[10],r=a[11],t=a[12],D=a[13],v=a[14];a=a[15];return(b*g-c*f)*(p*a-r*v)-(b*l-e*f)*(h*a-r*D)+(b*n-d*f)*(h*v-p*D)+(c*
l-e*g)*(m*a-r*t)-(c*n-d*g)*(m*v-p*t)+(e*n-d*l)*(m*D-h*t)};h.SIMD.multiply=function(a,b,c){var e=d.Float32x4.load(b,0),k=d.Float32x4.load(b,4),f=d.Float32x4.load(b,8);b=d.Float32x4.load(b,12);var g=d.Float32x4.load(c,0);g=d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,0,0,0,0),e),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,1,1,1,1),k),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,2,2,2,2),f),d.Float32x4.mul(d.Float32x4.swizzle(g,3,3,3,3),b))));d.Float32x4.store(a,0,g);g=d.Float32x4.load(c,
4);g=d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,0,0,0,0),e),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,1,1,1,1),k),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,2,2,2,2),f),d.Float32x4.mul(d.Float32x4.swizzle(g,3,3,3,3),b))));d.Float32x4.store(a,4,g);g=d.Float32x4.load(c,8);g=d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,0,0,0,0),e),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,1,1,1,1),k),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(g,2,2,2,2),
f),d.Float32x4.mul(d.Float32x4.swizzle(g,3,3,3,3),b))));d.Float32x4.store(a,8,g);c=d.Float32x4.load(c,12);e=d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(c,0,0,0,0),e),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(c,1,1,1,1),k),d.Float32x4.add(d.Float32x4.mul(d.Float32x4.swizzle(c,2,2,2,2),f),d.Float32x4.mul(d.Float32x4.swizzle(c,3,3,3,3),b))));d.Float32x4.store(a,12,e);return a};h.scalar.multiply=function(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3],l=b[4],n=b[5],m=b[6],h=b[7],p=b[8],r=b[9],
t=b[10],D=b[11],v=b[12],u=b[13],J=b[14];b=b[15];var z=c[0],x=c[1],B=c[2],A=c[3];a[0]=z*e+x*l+B*p+A*v;a[1]=z*d+x*n+B*r+A*u;a[2]=z*f+x*m+B*t+A*J;a[3]=z*g+x*h+B*D+A*b;z=c[4];x=c[5];B=c[6];A=c[7];a[4]=z*e+x*l+B*p+A*v;a[5]=z*d+x*n+B*r+A*u;a[6]=z*f+x*m+B*t+A*J;a[7]=z*g+x*h+B*D+A*b;z=c[8];x=c[9];B=c[10];A=c[11];a[8]=z*e+x*l+B*p+A*v;a[9]=z*d+x*n+B*r+A*u;a[10]=z*f+x*m+B*t+A*J;a[11]=z*g+x*h+B*D+A*b;z=c[12];x=c[13];B=c[14];A=c[15];a[12]=z*e+x*l+B*p+A*v;a[13]=z*d+x*n+B*r+A*u;a[14]=z*f+x*m+B*t+A*J;a[15]=z*g+x*
h+B*D+A*b;return a};h.multiply=r.USE_SIMD?h.SIMD.multiply:h.scalar.multiply;h.mul=h.multiply;h.scalar.translate=function(a,b,c){var e=c[0],d=c[1];c=c[2];if(b===a)a[12]=b[0]*e+b[4]*d+b[8]*c+b[12],a[13]=b[1]*e+b[5]*d+b[9]*c+b[13],a[14]=b[2]*e+b[6]*d+b[10]*c+b[14],a[15]=b[3]*e+b[7]*d+b[11]*c+b[15];else{var f=b[0];var g=b[1];var l=b[2];var n=b[3];var m=b[4];var h=b[5];var p=b[6];var r=b[7];var t=b[8];var D=b[9];var v=b[10];var u=b[11];a[0]=f;a[1]=g;a[2]=l;a[3]=n;a[4]=m;a[5]=h;a[6]=p;a[7]=r;a[8]=t;a[9]=
D;a[10]=v;a[11]=u;a[12]=f*e+m*d+t*c+b[12];a[13]=g*e+h*d+D*c+b[13];a[14]=l*e+p*d+v*c+b[14];a[15]=n*e+r*d+u*c+b[15]}return a};h.SIMD.translate=function(a,b,c){var e=d.Float32x4.load(b,0),k=d.Float32x4.load(b,4),f=d.Float32x4.load(b,8),g=d.Float32x4.load(b,12);c=d.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);e=d.Float32x4.mul(e,d.Float32x4.swizzle(c,0,0,0,0));k=d.Float32x4.mul(k,d.Float32x4.swizzle(c,
1,1,1,1));f=d.Float32x4.mul(f,d.Float32x4.swizzle(c,2,2,2,2));b=d.Float32x4.add(e,d.Float32x4.add(k,d.Float32x4.add(f,g)));d.Float32x4.store(a,12,b);return a};h.translate=r.USE_SIMD?h.SIMD.translate:h.scalar.translate;h.scalar.scale=function(a,b,c){var e=c[0],d=c[1];c=c[2];a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};h.SIMD.scale=function(a,
b,c){var e=window.SIMD;c=e.Float32x4(c[0],c[1],c[2],0);var d=e.Float32x4.load(b,0);e.Float32x4.store(a,0,e.Float32x4.mul(d,e.Float32x4.swizzle(c,0,0,0,0)));d=e.Float32x4.load(b,4);e.Float32x4.store(a,4,e.Float32x4.mul(d,e.Float32x4.swizzle(c,1,1,1,1)));d=e.Float32x4.load(b,8);e.Float32x4.store(a,8,e.Float32x4.mul(d,e.Float32x4.swizzle(c,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};h.scale=r.USE_SIMD?h.SIMD.scale:h.scalar.scale;h.rotate=function(a,b,c,e){var d=e[0],f=e[1];e=
e[2];var g=Math.sqrt(d*d+f*f+e*e);if(Math.abs(g)<r.EPSILON)return null;g=1/g;d*=g;f*=g;e*=g;var l=Math.sin(c);var n=Math.cos(c);var m=1-n;c=b[0];g=b[1];var h=b[2];var p=b[3];var N=b[4];var t=b[5];var D=b[6];var v=b[7];var u=b[8];var J=b[9];var z=b[10];var x=b[11];var B=d*d*m+n;var A=f*d*m+e*l;var G=e*d*m-f*l;var F=d*f*m-e*l;var O=f*f*m+n;var K=e*f*m+d*l;var L=d*e*m+f*l;d=f*e*m-d*l;f=e*e*m+n;a[0]=c*B+N*A+u*G;a[1]=g*B+t*A+J*G;a[2]=h*B+D*A+z*G;a[3]=p*B+v*A+x*G;a[4]=c*F+N*O+u*K;a[5]=g*F+t*O+J*K;a[6]=
h*F+D*O+z*K;a[7]=p*F+v*O+x*K;a[8]=c*L+N*d+u*f;a[9]=g*L+t*d+J*f;a[10]=h*L+D*d+z*f;a[11]=p*L+v*d+x*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};h.scalar.rotateX=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[4],f=b[5],g=b[6],l=b[7],n=b[8],m=b[9],h=b[10],p=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=d*c+n*e;a[5]=f*c+m*e;a[6]=g*c+h*e;a[7]=l*c+p*e;a[8]=n*c-d*e;a[9]=m*c-f*e;a[10]=h*c-g*e;a[11]=p*c-l*e;return a};
h.SIMD.rotateX=function(a,b,c){var e=window.SIMD,d=e.Float32x4.splat(Math.sin(c));c=e.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=e.Float32x4.load(b,4);b=e.Float32x4.load(b,8);e.Float32x4.store(a,4,e.Float32x4.add(e.Float32x4.mul(f,c),e.Float32x4.mul(b,d)));e.Float32x4.store(a,8,e.Float32x4.sub(e.Float32x4.mul(b,c),e.Float32x4.mul(f,d)));return a};h.rotateX=r.USE_SIMD?h.SIMD.rotateX:h.scalar.rotateX;h.scalar.rotateY=
function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],g=b[2],l=b[3],n=b[8],m=b[9],h=b[10],p=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c-n*e;a[1]=f*c-m*e;a[2]=g*c-h*e;a[3]=l*c-p*e;a[8]=d*e+n*c;a[9]=f*e+m*c;a[10]=g*e+h*c;a[11]=l*e+p*c;return a};h.SIMD.rotateY=function(a,b,c){var e=window.SIMD,d=e.Float32x4.splat(Math.sin(c));c=e.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=
b[13],a[14]=b[14],a[15]=b[15]);var f=e.Float32x4.load(b,0);b=e.Float32x4.load(b,8);e.Float32x4.store(a,0,e.Float32x4.sub(e.Float32x4.mul(f,c),e.Float32x4.mul(b,d)));e.Float32x4.store(a,8,e.Float32x4.add(e.Float32x4.mul(f,d),e.Float32x4.mul(b,c)));return a};h.rotateY=r.USE_SIMD?h.SIMD.rotateY:h.scalar.rotateY;h.scalar.rotateZ=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],g=b[2],l=b[3],n=b[4],m=b[5],h=b[6],p=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=
b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c+n*e;a[1]=f*c+m*e;a[2]=g*c+h*e;a[3]=l*c+p*e;a[4]=n*c-d*e;a[5]=m*c-f*e;a[6]=h*c-g*e;a[7]=p*c-l*e;return a};h.SIMD.rotateZ=function(a,b,c){var e=window.SIMD,d=e.Float32x4.splat(Math.sin(c));c=e.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=e.Float32x4.load(b,0);b=e.Float32x4.load(b,4);e.Float32x4.store(a,0,e.Float32x4.add(e.Float32x4.mul(f,c),e.Float32x4.mul(b,d)));e.Float32x4.store(a,
4,e.Float32x4.sub(e.Float32x4.mul(b,c),e.Float32x4.mul(f,d)));return a};h.rotateZ=r.USE_SIMD?h.SIMD.rotateZ:h.scalar.rotateZ;h.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};h.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};h.fromRotation=function(a,b,c){var e=c[0],
d=c[1];c=c[2];var f=Math.sqrt(e*e+d*d+c*c);if(Math.abs(f)<r.EPSILON)return null;f=1/f;e*=f;d*=f;c*=f;f=Math.sin(b);b=Math.cos(b);var g=1-b;a[0]=e*e*g+b;a[1]=d*e*g+c*f;a[2]=c*e*g-d*f;a[3]=0;a[4]=e*d*g-c*f;a[5]=d*d*g+b;a[6]=c*d*g+e*f;a[7]=0;a[8]=e*c*g+d*f;a[9]=d*c*g-e*f;a[10]=c*c*g+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};h.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a};h.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};h.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};h.fromRotationTranslation=function(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3],l=e+e,n=d+d,m=f+f;b=e*l;var h=
e*n;e*=m;var p=d*n;d*=m;f*=m;l*=g;n*=g;g*=m;a[0]=1-(p+f);a[1]=h+g;a[2]=e-n;a[3]=0;a[4]=h-g;a[5]=1-(b+f);a[6]=d+l;a[7]=0;a[8]=e+n;a[9]=d-l;a[10]=1-(b+p);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};h.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};h.getRotation=function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/
c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};h.fromRotationTranslationScale=function(a,b,c,e){var d=b[0],f=b[1],g=b[2],l=b[3],n=d+d,m=f+f,h=g+g;b=d*n;var p=d*m;d*=h;var r=f*m;f*=h;g*=h;n*=l;m*=l;l*=h;h=e[0];var t=e[1];e=e[2];a[0]=(1-(r+g))*h;a[1]=(p+l)*h;a[2]=(d-m)*h;
a[3]=0;a[4]=(p-l)*t;a[5]=(1-(b+g))*t;a[6]=(f+n)*t;a[7]=0;a[8]=(d+m)*e;a[9]=(f-n)*e;a[10]=(1-(b+r))*e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};h.fromRotationTranslationScaleOrigin=function(a,b,c,e,d){var f=b[0],g=b[1],k=b[2],n=b[3],m=f+f,h=g+g,p=k+k;b=f*m;var r=f*h;f*=p;var t=g*h;g*=p;k*=p;m*=n;h*=n;n*=p;p=e[0];var D=e[1];e=e[2];var v=d[0],u=d[1];d=d[2];a[0]=(1-(t+k))*p;a[1]=(r+n)*p;a[2]=(f-h)*p;a[3]=0;a[4]=(r-n)*D;a[5]=(1-(b+k))*D;a[6]=(g+m)*D;a[7]=0;a[8]=(f+h)*e;a[9]=(g-m)*e;a[10]=
(1-(b+t))*e;a[11]=0;a[12]=c[0]+v-(a[0]*v+a[4]*u+a[8]*d);a[13]=c[1]+u-(a[1]*v+a[5]*u+a[9]*d);a[14]=c[2]+d-(a[2]*v+a[6]*u+a[10]*d);a[15]=1;return a};h.fromQuat=function(a,b){var c=b[0],e=b[1],d=b[2];b=b[3];var f=c+c,g=e+e,l=d+d;c*=f;var n=e*f;e*=g;var h=d*f,p=d*g;d*=l;f*=b;g*=b;b*=l;a[0]=1-e-d;a[1]=n+b;a[2]=h-g;a[3]=0;a[4]=n-b;a[5]=1-c-d;a[6]=p+f;a[7]=0;a[8]=h+g;a[9]=p-f;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};h.frustum=function(a,b,c,e,d,f,g){var k=1/(c-b),n=1/(d-e),h=1/(f-g);
a[0]=2*f*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*n;a[6]=0;a[7]=0;a[8]=(c+b)*k;a[9]=(d+e)*n;a[10]=(g+f)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f*2*h;a[15]=0;return a};h.perspective=function(a,b,c,e,d){b=1/Math.tan(b/2);var f=1/(e-d);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*f;a[15]=0;return a};h.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*
Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var l=2/(g+b),h=2/(d+f);a[0]=l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=-((g-b)*l*.5);a[9]=(d-f)*h*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};h.ortho=function(a,b,c,e,d,f,g){var k=1/(b-c),h=1/(e-d),m=1/(f-g);a[0]=-2*k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(b+c)*k;a[13]=(d+e)*h;a[14]=(g+f)*m;a[15]=1;return a};h.lookAt=function(a,b,c,e){var d=b[0],f=b[1];
b=b[2];var g=e[0];var l=e[1];var n=e[2];var m=c[0];e=c[1];var p=c[2];if(Math.abs(d-m)<r.EPSILON&&Math.abs(f-e)<r.EPSILON&&Math.abs(b-p)<r.EPSILON)return h.identity(a);c=d-m;e=f-e;m=b-p;var w=1/Math.sqrt(c*c+e*e+m*m);c*=w;e*=w;m*=w;p=l*m-n*e;n=n*c-g*m;g=g*e-l*c;(w=Math.sqrt(p*p+n*n+g*g))?(w=1/w,p*=w,n*=w,g*=w):g=n=p=0;l=e*g-m*n;var N=m*p-c*g;var t=c*n-e*p;(w=Math.sqrt(l*l+N*N+t*t))?(w=1/w,l*=w,N*=w,t*=w):t=N=l=0;a[0]=p;a[1]=l;a[2]=c;a[3]=0;a[4]=n;a[5]=N;a[6]=e;a[7]=0;a[8]=g;a[9]=t;a[10]=m;a[11]=0;
a[12]=-(p*d+n*f+g*b);a[13]=-(l*d+N*f+t*b);a[14]=-(c*d+e*f+m*b);a[15]=1;return a};h.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};h.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+
Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};h.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};h.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=
b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a};h.sub=h.subtract;h.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};h.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+
c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};h.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===
b[14]&&a[15]===b[15]};h.equals=function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[4],l=a[5],h=a[6],m=a[7],p=a[8],w=a[9],N=a[10],t=a[11],D=a[12],v=a[13],u=a[14];a=a[15];var J=b[0],z=b[1],x=b[2],B=b[3],A=b[4],G=b[5],F=b[6],O=b[7],K=b[8],L=b[9],S=b[10],T=b[11],E=b[12],P=b[13],ba=b[14];b=b[15];return Math.abs(c-J)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(J))&&Math.abs(e-z)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(z))&&Math.abs(d-x)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(f-B)<=r.EPSILON*
Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(g-A)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(l-G)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(h-F)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(p-K)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(K))&&Math.abs(w-L)<=r.EPSILON*Math.max(1,Math.abs(w),Math.abs(L))&&Math.abs(N-S)<=r.EPSILON*Math.max(1,Math.abs(N),Math.abs(S))&&Math.abs(t-T)<=r.EPSILON*Math.max(1,
Math.abs(t),Math.abs(T))&&Math.abs(D-E)<=r.EPSILON*Math.max(1,Math.abs(D),Math.abs(E))&&Math.abs(v-P)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(u-ba)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(ba))&&Math.abs(a-b)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};var p={create:function(){var a=new r.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new r.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,c){var e=new r.ARRAY_TYPE(3);e[0]=a;
e[1]=b;e[2]=c;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,c,e){a[0]=b;a[1]=c;a[2]=e;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}};p.sub=p.subtract;p.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a};p.mul=p.multiply;p.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a};p.div=p.divide;
p.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};p.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};p.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};p.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};p.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};
p.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};p.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;return a};p.distance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+e*e+a*a)};p.dist=p.distance;p.squaredDistance=function(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return c*c+e*e+a*a};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};p.len=p.length;p.squaredLength=
function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};p.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};p.normalize=function(a,b){var c=b[0],e=b[1],d=b[2];c=c*c+e*e+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};p.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};p.cross=function(a,b,c){var e=b[0],d=b[1];b=b[2];var f=c[0],g=c[1];c=c[2];a[0]=d*c-b*g;a[1]=
b*f-e*c;a[2]=e*g-d*f;return a};p.lerp=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=b+d*(c[2]-b);return a};p.hermite=function(a,b,c,d,k,f){var e=f*f,l=e*(2*f-3)+1,h=e*(f-2)+f,m=e*(f-1);f=e*(3-2*f);a[0]=b[0]*l+c[0]*h+d[0]*m+k[0]*f;a[1]=b[1]*l+c[1]*h+d[1]*m+k[1]*f;a[2]=b[2]*l+c[2]*h+d[2]*m+k[2]*f;return a};p.bezier=function(a,b,c,d,k,f){var e=1-f,h=e*e,n=f*f,m=h*e;h*=3*f;e*=3*n;f*=n;a[0]=b[0]*m+c[0]*h+d[0]*e+k[0]*f;a[1]=b[1]*m+c[1]*h+d[1]*e+k[1]*f;a[2]=b[2]*m+c[2]*
h+d[2]*e+k[2]*f;return a};p.random=function(a,b){b=b||1;var c=2*r.RANDOM()*Math.PI,d=2*r.RANDOM()-1,k=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*k;a[1]=Math.sin(c)*k;a[2]=d*b;return a};p.transformMat4=function(a,b,c){var d=b[0],k=b[1];b=b[2];var f=c[3]*d+c[7]*k+c[11]*b+c[15];f=f||1;a[0]=(c[0]*d+c[4]*k+c[8]*b+c[12])/f;a[1]=(c[1]*d+c[5]*k+c[9]*b+c[13])/f;a[2]=(c[2]*d+c[6]*k+c[10]*b+c[14])/f;return a};p.transformMat3=function(a,b,c){var d=b[0],k=b[1];b=b[2];a[0]=d*c[0]+k*c[3]+b*c[6];a[1]=d*c[1]+k*c[4]+b*c[7];
a[2]=d*c[2]+k*c[5]+b*c[8];return a};p.transformQuat=function(a,b,c){var d=b[0],k=b[1],f=b[2];b=c[0];var g=c[1],h=c[2];c=c[3];var n=c*d+g*f-h*k,m=c*k+h*d-b*f,p=c*f+b*k-g*d;d=-b*d-g*k-h*f;a[0]=n*c+d*-b+m*-h-p*-g;a[1]=m*c+d*-g+p*-b-n*-h;a[2]=p*c+d*-h+n*-g-m*-b;return a};p.rotateX=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0];f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};p.rotateY=
function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d);f[1]=e[1];f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};p.rotateZ=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);f[2]=e[2];a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};p.forEach=function(){var a=p.create();return function(b,
c,d,h,f,g){c||(c=3);d||(d=0);for(h=h?Math.min(h*c+d,b.length):b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],f(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();p.angle=function(a,b){a=p.fromValues(a[0],a[1],a[2]);b=p.fromValues(b[0],b[1],b[2]);p.normalize(a,a);p.normalize(b,b);b=p.dot(a,b);return 1<b?0:Math.acos(b)};p.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};p.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};p.equals=function(a,b){var c=a[0],d=a[1];
a=a[2];var h=b[0],f=b[1];b=b[2];return Math.abs(c-h)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-f)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(a-b)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};(function(){function a(a,c){var b=document.createElement("canvas"),d=b.getContext(qa()),f=h.create();h.perspective(f,2*Math.PI/5,Math.abs(b.width/b.height),1,100);document.body.appendChild(b);b.width=window.innerWidth;b.height=window.innerHeight;var g=d.configureSwapChain({device:a,
format:"bgra8unorm"});ra(a,"test.png",function(d){function e(){var a=h.create();h.translate(a,a,p.fromValues(0,0,-4));var b=Date.now()/1E3;h.rotate(a,a,1,p.fromValues(Math.sin(b),Math.cos(b),0));b=h.create();h.multiply(b,f,a);return b}var k=a.createBuffer({size:ia.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});k.setSubData(0,ia);var l=a.createBindGroupLayout({bindings:[{binding:0,visibility:GPUShaderStage.VERTEX,type:"uniform-buffer"},{binding:1,visibility:GPUShaderStage.FRAGMENT,
type:"sampler"},{binding:2,visibility:GPUShaderStage.FRAGMENT,type:"sampled-texture"}]}),r=a.createPipelineLayout({bindGroupLayouts:[l]}),N=a.createRenderPipeline({layout:r,vertexStage:{module:a.createShaderModule({code:c.compileGLSL("#version 450\n  layout(set = 0, binding = 0) uniform Uniforms {\n    mat4 modelViewProjectionMatrix;\n  } uniforms;\n  layout(location = 0) in vec4 position;\n  layout(location = 1) in vec2 uv;\n  layout(location = 0) out vec2 fragUV;\n  layout(location = 1) out vec4 fragPosition;\n  void main() {\n    fragPosition = 0.5 * (position + vec4(1.0));\n    gl_Position = uniforms.modelViewProjectionMatrix * position;\n    fragUV = uv;\n  }",
"vertex"),source:"#version 450\n  layout(set = 0, binding = 0) uniform Uniforms {\n    mat4 modelViewProjectionMatrix;\n  } uniforms;\n  layout(location = 0) in vec4 position;\n  layout(location = 1) in vec2 uv;\n  layout(location = 0) out vec2 fragUV;\n  layout(location = 1) out vec4 fragPosition;\n  void main() {\n    fragPosition = 0.5 * (position + vec4(1.0));\n    gl_Position = uniforms.modelViewProjectionMatrix * position;\n    fragUV = uv;\n  }",transform:function(a){return c.compileGLSL(a,
"vertex")}}),entryPoint:"main"},fragmentStage:{module:a.createShaderModule({code:c.compileGLSL("#version 450\n  layout(set = 0, binding = 1) uniform sampler mySampler;\n  layout(set = 0, binding = 2) uniform texture2D myTexture;\n  layout(location = 0) in vec2 fragUV;\n  layout(location = 1) in vec4 fragPosition;\n  layout(location = 0) out vec4 outColor;\n  void main() {\n    outColor =  texture(sampler2D(myTexture, mySampler), fragUV) * fragPosition;\n    //outColor =  vec4(fragUV,0.0,1.0);\n    \n  }",
"fragment"),source:"#version 450\n  layout(set = 0, binding = 1) uniform sampler mySampler;\n  layout(set = 0, binding = 2) uniform texture2D myTexture;\n  layout(location = 0) in vec2 fragUV;\n  layout(location = 1) in vec4 fragPosition;\n  layout(location = 0) out vec4 outColor;\n  void main() {\n    outColor =  texture(sampler2D(myTexture, mySampler), fragUV) * fragPosition;\n    //outColor =  vec4(fragUV,0.0,1.0);\n    \n  }",transform:function(a){return c.compileGLSL(a,"fragment")}}),entryPoint:"main"},
primitiveTopology:"triangle-list",depthStencilState:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},vertexState:{vertexBuffers:[{arrayStride:40,attributes:[{shaderLocation:0,offset:0,format:"float4"},{shaderLocation:1,offset:32,format:"float2"}]}]},rasterizationState:{cullMode:"back"},colorStates:[{format:"bgra8unorm"}]}),t={colorAttachments:[{attachment:void 0,loadValue:{r:.5,g:.5,b:.5,a:1}}],depthStencilAttachment:{attachment:a.createTexture({size:{width:b.width,height:b.height,
depth:1},format:"depth24plus-stencil8",usage:GPUTextureUsage.OUTPUT_ATTACHMENT}).createView(),depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:0,stencilStoreOp:"store"}},D=a.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});r=a.createSampler({magFilter:"linear",minFilter:"linear"});var v=a.createBindGroup({layout:l,bindings:[{binding:0,resource:{buffer:D}},{binding:1,resource:r},{binding:2,resource:d.createView()}]}),u=function(){requestAnimationFrame(u);t.colorAttachments[0].attachment=
g.getCurrentTexture().createView();var b=a.createCommandEncoder({}),c=b.beginRenderPass(t);c.setPipeline(N);c.setBindGroup(0,v);c.setVertexBuffer(0,k);c.draw(36,1,0,0);c.endPass();a.defaultQueue.submit([b.finish()]);D.setSubData(0,e())};u()})}if(!navigator.gpu)throw alert("Unable to start - your browser doesn't support WebGPU"),Error("Your browser does not support WebGPU");navigator.gpu.requestAdapter().then(function(b){b.requestDevice().then(function(b){Da().then(function(c){a(b,c)})})})})()})();
